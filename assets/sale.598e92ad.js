var w=Object.defineProperty,y=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var m=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;var S=(e,a,t)=>a in e?w(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,l=(e,a)=>{for(var t in a||(a={}))m.call(a,t)&&S(e,t,a[t]);if(i)for(var t of i(a))f.call(a,t)&&S(e,t,a[t]);return e},o=(e,a)=>y(e,b(a));var I=(e,a)=>{var t={};for(var s in e)m.call(e,s)&&a.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&i)for(var s of i(e))a.indexOf(s)<0&&f.call(e,s)&&(t[s]=e[s]);return t};import{d as g}from"./vendor.2c85bd1e.js";import{s as v,r as R,f as L,e as T,h as k}from"./index.cefb1522.js";import{u as x}from"./index.917c111f.js";const D=x(),M=D.bearerToken;v(()=>D.logout());const c=k(M),W=g({id:"huitzilopochtli-sales",state:()=>({saleList:{},saleIncludedData:{},selectedSale:null}),getters:{sales:e=>Object.values(e.saleList),saleWithRelationships:e=>{if(e.selectedSale){const a=e.selectedSale.merchandisesSold.map(t=>{var h,u,p;const s=e.saleIncludedData.merchandises_sold[t],d=(h=s.relationships.client.data.slice().pop())==null?void 0:h.id,n=(u=s.relationships.merchandise.data.slice().pop())==null?void 0:u.id,r=e.saleIncludedData.merchandises[n],$=(p=r.relationships.product.data.slice().pop())==null?void 0:p.id;return o(l({},s),{client:l({},e.saleIncludedData.clients[d]),merchandise:l({},r),product:l({},e.saleIncludedData.products[$])})});return o(l({},e.selectedSale),{merchandises_sold:a})}return null}},actions:{async fetchSaleList(e=null){const{data:a}=await c.fetchSaleList(e);this.$patch(t=>{t.saleList=R(a.data),t.saleIncludedData=L(a.included)})},async fetchOneSale(e){if(this.saleList[e]){this.$patch(t=>t.selectedSale=this.saleList[e]);return}const{data:a}=await c.fetchSale(e);this.$patch(t=>{t.selectedSale=l(l({id:a.data.id},a.data.attributes),T(a.data.relationships)),t.saleIncludedData=L(a.included)})},async createSale(e){const{data:a}=await c.createSale(e);this.$patch(t=>t.saleList[a.data.id]=a.data)},async updateSale(t){var s=t,{id:e}=s,a=I(s,["id"]);const d=l({id:e},a);await c.updateSale(d),this.$patch(n=>n.saleList[e]=d)},async deleteSale(e){await c.deleteSale(e),this.$patch(a=>delete a.saleList[e])}}});export{W as u};
