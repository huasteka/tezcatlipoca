import{u as I}from"./product.29f2b8be.js";import{_ as O,r as T}from"./index.917c111f.js";import{r as W,e as d,f as s,L as A,M as G,u as e,o as c,c as S,w as l,h as o,g as _,F as H,W as J,i as K,t as y,l as p,B as Q,s as X}from"./vendor.2c85bd1e.js";const Y={retail_price:[{required:!0,message:"Please, input the retail price",trigger:"blur"},{type:"number",min:1,message:"Must be greater than zero",trigger:"blur"}],purchase_price:[{required:!0,message:"Please, input the purchase price",trigger:"blur"},{type:"number",min:1,message:"Must be greater than zero",trigger:"blur"}]},Z={product_id:[{required:!0,message:"Please, select a product",trigger:"blur"}]},ee={code:[{required:!0,message:"Please, input the product code",trigger:"blur"},{min:2,message:"Must have at least 2 characters",trigger:"blur"}],name:[{required:!0,message:"Please, input the product name",trigger:"blur"}]};const te=p("Select Product"),re=p("Create Product"),oe={key:0},le={key:1},ae=p("Back"),se=p("Submit"),ue={props:{merchandise:Object},emits:["submit"],setup(F,{emit:L}){const M=F,g=I(),{id:x=null,retail_price:C="0.00",purchase_price:B="0.00",product:i=null}=M.merchandise||{},f=W(),a=d({id:x,retail_price:parseFloat(C),purchase_price:parseFloat(B),product_id:i==null?void 0:i.id,product:{name:"",code:""}}),b=d(Y),R=d(Z),h=d(ee),u=d({isLoading:!0,blockProductCreate:i!==null,hasProduct:i!==null,productList:[]});g.fetchProductList().then(()=>{u.productList=g.products,u.isLoading=!1});const U=()=>T.push({path:"/dashboard/sales-management/merchandises"}),q=m=>{!m||m.validate(r=>{if(!r)return!1;L("submit",m.model)})};return(m,r)=>{const P=s("el-radio"),w=s("el-radio-group"),n=s("el-form-item"),$=s("el-tag"),N=s("el-option"),D=s("el-select"),V=s("el-input"),v=s("el-input-number"),k=s("el-button"),z=s("el-form"),j=A("loading");return G((c(),S(z,{"label-width":"130px",ref_key:"createMerchandiseFormRef",ref:f,model:e(a)},{default:l(()=>[o(n,null,{default:l(()=>[o(w,{modelValue:e(u).hasProduct,"onUpdate:modelValue":r[0]||(r[0]=t=>e(u).hasProduct=t)},{default:l(()=>[o(P,{border:"",label:!0},{default:l(()=>[te]),_:1}),o(P,{border:"",label:!1,disabled:e(u).blockProductCreate},{default:l(()=>[re]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),e(u).hasProduct?(c(),_("div",oe,[o(n,{label:"Product",prop:"product_id",rules:e(R).product_id},{default:l(()=>[o(D,{class:"small-form-input",placeholder:"Select a product",modelValue:e(a).product_id,"onUpdate:modelValue":r[1]||(r[1]=t=>e(a).product_id=t)},{default:l(()=>[(c(!0),_(H,null,J(e(u).productList,(t,E)=>(c(),S(N,{key:E,label:`${t.name} (${t.code})`,value:`${t.id}`},{default:l(()=>[K("span",null,y(t.name),1),o($,{class:"select-option-icon-position"},{default:l(()=>[p(y(t.code),1)]),_:2},1024)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"])])):(c(),_("div",le,[o(n,{label:"Product Name",prop:"product.name",rules:e(h).name},{default:l(()=>[o(V,{modelValue:e(a).product.name,"onUpdate:modelValue":r[2]||(r[2]=t=>e(a).product.name=t)},null,8,["modelValue"])]),_:1},8,["rules"]),o(n,{label:"Product Code",prop:"product.code",rules:e(h).code},{default:l(()=>[o(V,{modelValue:e(a).product.code,"onUpdate:modelValue":r[3]||(r[3]=t=>e(a).product.code=t),style:{width:"100px"}},null,8,["modelValue"])]),_:1},8,["rules"])])),o(n,{label:"Retail Price",prop:"retail_price",rules:e(b).retail_price},{default:l(()=>[o(v,{class:"small-form-input",modelValue:e(a).retail_price,"onUpdate:modelValue":r[4]||(r[4]=t=>e(a).retail_price=t),precision:2,min:0},null,8,["modelValue"])]),_:1},8,["rules"]),o(n,{label:"Purchase Price",prop:"purchase_price",rules:e(b).purchase_price},{default:l(()=>[o(v,{class:"small-form-input",modelValue:e(a).purchase_price,"onUpdate:modelValue":r[5]||(r[5]=t=>e(a).purchase_price=t),precision:2,min:0},null,8,["modelValue"])]),_:1},8,["rules"]),o(n,null,{default:l(()=>[o(k,{icon:e(Q),onClick:r[6]||(r[6]=t=>U())},{default:l(()=>[ae]),_:1},8,["icon"]),o(k,{type:"primary",icon:e(X),onClick:r[7]||(r[7]=t=>q(f.value))},{default:l(()=>[se]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])),[[j,e(u).isLoading]])}}};var ce=O(ue,[["__scopeId","data-v-7cfe0854"]]);export{ce as S};
