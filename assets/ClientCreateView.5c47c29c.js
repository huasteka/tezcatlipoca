var L=Object.defineProperty;var n=Object.getOwnPropertySymbols;var u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;var m=(t,a,e)=>a in t?L(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,f=(t,a)=>{for(var e in a||(a={}))u.call(a,e)&&m(t,e,a[e]);if(n)for(var e of n(a))d.call(a,e)&&m(t,e,a[e]);return t};var p=(t,a)=>{var e={};for(var s in t)u.call(t,s)&&a.indexOf(s)<0&&(e[s]=t[s]);if(t!=null&&n)for(var s of n(t))a.indexOf(s)<0&&d.call(t,s)&&(e[s]=t[s]);return e};import{S as y}from"./SalesClientForm.10fdf757.js";import{N as r,r as h}from"./index.917c111f.js";import{u as b}from"./client.cb3ec19c.js";import{e as F,L as N,o as g,g as C,M as B,u as E,h as k,F as x,i as D}from"./vendor.2c85bd1e.js";import"./index.cefb1522.js";import"./interceptor.bb9bfcba.js";const V=D("h2",null,"Create client",-1),G={setup(t){const a=b(),e=F({isLoading:!1}),s=l=>{var i=l,{contacts:c}=i,o=p(i,["contacts"]);e.isLoading=!0,a.createClient(f({},o)).then(v=>{if(r.notifySuccess("Client created"),c.length===0){h.push({path:"/dashboard/sales-management/clients"});return}const S=c.map(_=>a.createClientContact(v,_));Promise.all(S).then(()=>{r.notifySuccess("Client contacts created"),h.push({path:"/dashboard/sales-management/clients"})}).catch(()=>r.notifyError("Could not create client contacts")).finally(()=>e.isLoading=!1)}).catch(()=>{e.isLoading=!1,r.notifyError("Could not create client")})};return(c,o)=>{const l=N("loading");return g(),C(x,null,[V,B((g(),C("div",null,[k(y,{onSubmit:o[0]||(o[0]=i=>s(i))})])),[[l,E(e).isLoading]])],64)}}};export{G as default};
