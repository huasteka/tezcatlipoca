var L=Object.defineProperty,m=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var l=Object.getOwnPropertySymbols;var d=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;var n=(e,t,p)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:p}):e[t]=p,r=(e,t)=>{for(var p in t||(t={}))d.call(t,p)&&n(e,p,t[p]);if(l)for(var p of l(t))o.call(t,p)&&n(e,p,t[p]);return e},c=(e,t)=>m(e,I(t));var S=(e,t)=>{var p={};for(var a in e)d.call(e,a)&&t.indexOf(a)<0&&(p[a]=e[a]);if(e!=null&&l)for(var a of l(e))t.indexOf(a)<0&&o.call(e,a)&&(p[a]=e[a]);return p};import{d as w}from"./vendor.2c85bd1e.js";import{s as y,r as $,f as h,e as D,a as C}from"./index.cefb1522.js";import{u as b}from"./index.917c111f.js";const f=b(),v=f.bearerToken;y(()=>f.logout());const i=C(v),T=w({id:"huitzilopochtli-supplier",state:()=>({supplierList:{},supplierIncludedData:{},selectedSupplier:null}),getters:{suppliers:e=>Object.values(e.supplierList),suppliersFixed:e=>Object.values(e.supplierList).map(t=>c(r({},t),{id:parseInt(t.id,10)})),supplierWithRelationships:e=>{if(e.selectedSupplier){const t=e.selectedSupplier.contacts.map(p=>e.supplierIncludedData.contacts[p]);return c(r({},e.selectedSupplier),{contacts:t})}return null}},actions:{async fetchSupplierList(e=null){const{data:t}=await i.fetchSupplierList(e);this.$patch(p=>{p.supplierList=$(t.data),p.supplierIncludedData=h(t.included)})},async fetchOneSupplier(e){if(this.supplierList[e]){this.$patch(p=>p.selectedSupplier=this.supplierList[e]);return}const{data:t}=await i.fetchSupplier(e);this.$patch(p=>{p.selectedSupplier=r(r({id:t.data.id},t.data.attributes),D(t.data.relationships)),p.supplierIncludedData=h(t.included)})},async createSupplier({name:e,trade_name:t,legal_document_code:p}){const{data:a}=await i.createSupplier({name:e,trade_name:t,legal_document_code:p});return this.$patch(s=>s.supplierList[a.data.id]=a.data),a.data.id},async createSupplierContact(e,t){await i.createSupplierContact(e,t)},async updateSupplier({id:e,name:t,trade_name:p,legal_document_code:a}){const s={id:e,name:t,trade_name:p,legal_document_code:a};return await i.updateSupplier(s),this.$patch(u=>u.supplierList[e]=s),e},async updateSupplierContact(e,a){var s=a,{id:t}=s,p=S(s,["id"]);await i.createSupplierContact(e,r({id:t},p)),this.$patch(u=>u.supplierIncludedData.contacts[t]=p)},async deleteSupplier(e){await i.deleteSupplier(e),this.$patch(t=>delete t.supplierList[e])},async deleteSupplierContact(e,t){await i.deleteSupplierContact(e,t),this.$patch(p=>delete p.supplierIncludedData.contacts[t])}}});export{T as u};
