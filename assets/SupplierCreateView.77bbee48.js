var y=Object.defineProperty;var i=Object.getOwnPropertySymbols;var u=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;var c=(r,t,e)=>t in r?y(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,d=(r,t)=>{for(var e in t||(t={}))u.call(t,e)&&c(r,e,t[e]);if(i)for(var e of i(t))m.call(t,e)&&c(r,e,t[e]);return r};var f=(r,t)=>{var e={};for(var s in r)u.call(r,s)&&t.indexOf(s)<0&&(e[s]=r[s]);if(r!=null&&i)for(var s of i(r))t.indexOf(s)<0&&m.call(r,s)&&(e[s]=r[s]);return e};import{S as b}from"./SalesSupplierForm.704e52a2.js";import{N as n,r as h}from"./index.917c111f.js";import{u as C}from"./supplier.bb90ccb0.js";import{e as F,L as N,o as S,g,M as B,u as E,h as k,F as x,i as D}from"./vendor.2c85bd1e.js";import"./index.cefb1522.js";import"./interceptor.bb9bfcba.js";const V=D("h2",null,"Create supplier",-1),G={setup(r){const t=C(),e=F({isLoading:!1}),s=l=>{var o=l,{contacts:p}=o,a=f(o,["contacts"]);e.isLoading=!0,t.createSupplier(d({},a)).then(v=>{if(n.notifySuccess("Supplier created"),p.length===0){h.push({path:"/dashboard/sales-management/suppliers"});return}const _=p.map(L=>t.createSupplierContact(v,L));Promise.all(_).then(()=>{n.notifySuccess("Supplier contacts created"),h.push({path:"/dashboard/sales-management/suppliers"})}).catch(()=>n.notifyError("Could not create supplier contacts")).finally(()=>e.isLoading=!1)}).catch(()=>{e.isLoading=!1,n.notifyError("Could not create supplier")})};return(p,a)=>{const l=N("loading");return S(),g(x,null,[V,B((S(),g("div",null,[k(b,{onSubmit:a[0]||(a[0]=o=>s(o))})])),[[l,E(e).isLoading]])],64)}}};export{G as default};
