var f=Object.defineProperty,L=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;var h=(e,t,a)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,c=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&h(e,a,t[a]);if(r)for(var a of r(t))u.call(t,a)&&h(e,a,t[a]);return e},i=(e,t)=>L(e,I(t));var p=(e,t)=>{var a={};for(var s in e)o.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&r)for(var s of r(e))t.indexOf(s)<0&&u.call(e,s)&&(a[s]=e[s]);return a};import{d as S}from"./vendor.2c85bd1e.js";import{s as D,r as $,f as l,e as w,d as y}from"./index.cefb1522.js";import{u as b}from"./index.917c111f.js";const M=b(),g=M.bearerToken;D(()=>M.logout());const d=y(g),x=S({id:"huitzilopochtli-merchandise",state:()=>({merchandiseList:{},merchandiseIncludedData:{},selectedMerchandise:null}),getters:{merchandises:e=>Object.values(e.merchandiseList).map(t=>{if(t.product&&t.product.length>0){const a=t.product.slice().pop();return i(c({},t),{product:e.merchandiseIncludedData.products[a]})}return t}),merchandiseWithRelationships:e=>{if(e.selectedMerchandise){const t=e.selectedMerchandise.product.map(a=>e.merchandiseIncludedData.products[a]);return i(c({},e.selectedMerchandise),{product:t.slice().pop()})}return null}},actions:{async fetchMerchandiseList(e=null){const{data:t}=await d.fetchMerchandiseList(e);this.$patch(a=>{a.merchandiseList=$(t.data),a.merchandiseIncludedData=l(t.included)})},async fetchOneMerchandise(e){if(this.merchandiseList[e]){this.$patch(a=>a.selectedMerchandise=this.merchandiseList[e]);return}const{data:t}=await d.fetchMerchandise(e);this.$patch(a=>{a.selectedMerchandise=c(c({id:t.data.id},t.data.attributes),w(t.data.relationships)),a.merchandiseIncludedData=l(t.included)})},async createMerchandise(e){const{data:t}=await d.createMerchandise(e);this.$patch(a=>a.merchandiseList[t.data.id]=t.data)},async updateMerchandise(a){var s=a,{id:e}=s,t=p(s,["id"]);const n=c({id:e},t);await d.updateMerchandise(n),this.$patch(m=>m.merchandiseList[e]=n)},async deleteMerchandise(e){await d.deleteMerchandise(e),this.$patch(t=>delete t.merchandiseList[e])}}});export{x as u};
